//this file is generated by program(drogon_ctl) automatically,don't modify it!
#include "data.h"
#include <drogon/utils/OStringStream.h>
#include <drogon/utils/Utilities.h>
#include <string>
#include <map>
#include <vector>
#include <set>
#include <iostream>
#include <unordered_map>
#include <unordered_set>
#include <algorithm>
#include <list>
#include <deque>
#include <queue>
using namespace drogon;
std::string data::genText(const DrTemplateData& data_view_data)
{
	drogon::OStringStream data_tmp_stream;
	std::string layoutName{""};
	data_tmp_stream << "<!DOCTYPE html>\n";
	data_tmp_stream << "<html lang=\"en\">\n";
 auto data=data_view_data.get<std::vector<std::map<std::string, std::string>>>("data");
data_tmp_stream<<"\n";
	data_tmp_stream << "    <head>\n";
	data_tmp_stream << "        <meta charset=\"UTF-8\">\n";
	data_tmp_stream << "        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n";
	data_tmp_stream << "        <title>Sensor Data Dashboard</title>\n";
	data_tmp_stream << "        <style>\n";
	data_tmp_stream << "            * {\n";
	data_tmp_stream << "                margin: 0;\n";
	data_tmp_stream << "                padding: 0;\n";
	data_tmp_stream << "                box-sizing: border-box;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            body {\n";
	data_tmp_stream << "                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n";
	data_tmp_stream << "                background-color: #f5f9ff;\n";
	data_tmp_stream << "                color: #333;\n";
	data_tmp_stream << "                line-height: 1.6;\n";
	data_tmp_stream << "                padding: 20px;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .container {\n";
	data_tmp_stream << "                max-width: 1200px;\n";
	data_tmp_stream << "                margin: 0 auto;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            header {\n";
	data_tmp_stream << "                text-align: center;\n";
	data_tmp_stream << "                margin-bottom: 30px;\n";
	data_tmp_stream << "                padding-bottom: 20px;\n";
	data_tmp_stream << "                border-bottom: 2px solid #e0edff;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            h1 {\n";
	data_tmp_stream << "                color: #2c5282;\n";
	data_tmp_stream << "                font-size: 28px;\n";
	data_tmp_stream << "                font-weight: 600;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .subtitle {\n";
	data_tmp_stream << "                color: #718096;\n";
	data_tmp_stream << "                margin-top: 5px;\n";
	data_tmp_stream << "                font-size: 14px;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .filter-section {\n";
	data_tmp_stream << "                background: white;\n";
	data_tmp_stream << "                padding: 25px;\n";
	data_tmp_stream << "                margin-bottom: 30px;\n";
	data_tmp_stream << "                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n";
	data_tmp_stream << "                border: 1px solid #e2e8f0;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .filter-grid {\n";
	data_tmp_stream << "                display: grid;\n";
	data_tmp_stream << "                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n";
	data_tmp_stream << "                gap: 20px;\n";
	data_tmp_stream << "                margin-bottom: 20px;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .filter-group {\n";
	data_tmp_stream << "                display: flex;\n";
	data_tmp_stream << "                flex-direction: column;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            label {\n";
	data_tmp_stream << "                font-weight: 500;\n";
	data_tmp_stream << "                color: #4a5568;\n";
	data_tmp_stream << "                margin-bottom: 6px;\n";
	data_tmp_stream << "                font-size: 14px;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            input,\n";
	data_tmp_stream << "            select {\n";
	data_tmp_stream << "                padding: 10px 12px;\n";
	data_tmp_stream << "                border: 1px solid #cbd5e0;\n";
	data_tmp_stream << "                border-radius: 4px;\n";
	data_tmp_stream << "                font-size: 14px;\n";
	data_tmp_stream << "                transition: border-color 0.2s;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            input:focus,\n";
	data_tmp_stream << "            select:focus {\n";
	data_tmp_stream << "                outline: none;\n";
	data_tmp_stream << "                border-color: #4299e1;\n";
	data_tmp_stream << "                box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .multiselect-container {\n";
	data_tmp_stream << "                position: relative;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .multiselect-header {\n";
	data_tmp_stream << "                padding: 10px 12px;\n";
	data_tmp_stream << "                border: 1px solid #cbd5e0;\n";
	data_tmp_stream << "                border-radius: 4px;\n";
	data_tmp_stream << "                background: white;\n";
	data_tmp_stream << "                cursor: pointer;\n";
	data_tmp_stream << "                display: flex;\n";
	data_tmp_stream << "                justify-content: space-between;\n";
	data_tmp_stream << "                align-items: center;\n";
	data_tmp_stream << "                font-size: 14px;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .multiselect-header::after {\n";
	data_tmp_stream << "                content: \"â–¼\";\n";
	data_tmp_stream << "                font-size: 10px;\n";
	data_tmp_stream << "                color: #718096;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .multiselect-options {\n";
	data_tmp_stream << "                position: absolute;\n";
	data_tmp_stream << "                top: 100%;\n";
	data_tmp_stream << "                left: 0;\n";
	data_tmp_stream << "                right: 0;\n";
	data_tmp_stream << "                background: white;\n";
	data_tmp_stream << "                border: 1px solid #cbd5e0;\n";
	data_tmp_stream << "                border-top: none;\n";
	data_tmp_stream << "                border-radius: 0 0 4px 4px;\n";
	data_tmp_stream << "                z-index: 10;\n";
	data_tmp_stream << "                display: none;\n";
	data_tmp_stream << "                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .multiselect-options.active {\n";
	data_tmp_stream << "                display: block;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .multiselect-option {\n";
	data_tmp_stream << "                padding: 10px 12px;\n";
	data_tmp_stream << "                display: flex;\n";
	data_tmp_stream << "                align-items: center;\n";
	data_tmp_stream << "                gap: 8px;\n";
	data_tmp_stream << "                cursor: pointer;\n";
	data_tmp_stream << "                transition: background-color 0.2s;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .multiselect-option:hover {\n";
	data_tmp_stream << "                background-color: #f7fafc;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .multiselect-option input[type=\"checkbox\"] {\n";
	data_tmp_stream << "                margin: 0;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .button-group {\n";
	data_tmp_stream << "                display: flex;\n";
	data_tmp_stream << "                gap: 12px;\n";
	data_tmp_stream << "                justify-content: center;\n";
	data_tmp_stream << "                padding-top: 20px;\n";
	data_tmp_stream << "                border-top: 1px solid #e2e8f0;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .btn {\n";
	data_tmp_stream << "                padding: 10px 24px;\n";
	data_tmp_stream << "                border: none;\n";
	data_tmp_stream << "                border-radius: 4px;\n";
	data_tmp_stream << "                font-weight: 500;\n";
	data_tmp_stream << "                font-size: 14px;\n";
	data_tmp_stream << "                cursor: pointer;\n";
	data_tmp_stream << "                transition: all 0.2s;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .btn-primary {\n";
	data_tmp_stream << "                background-color: #4299e1;\n";
	data_tmp_stream << "                color: white;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .btn-primary:hover {\n";
	data_tmp_stream << "                background-color: #3182ce;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .btn-export {\n";
	data_tmp_stream << "                background-color: #2eb576;\n";
	data_tmp_stream << "                color: white;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .btn-export:hover {\n";
	data_tmp_stream << "                background-color: #38a169;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .btn-secondary {\n";
	data_tmp_stream << "                background-color: #e2e8f0;\n";
	data_tmp_stream << "                color: #4a5568;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .btn-secondary:hover {\n";
	data_tmp_stream << "                background-color: #cbd5e0;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .table-container {\n";
	data_tmp_stream << "                background: white;\n";
	data_tmp_stream << "                overflow: hidden;\n";
	data_tmp_stream << "                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n";
	data_tmp_stream << "                border: 1px solid #e2e8f0;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            table {\n";
	data_tmp_stream << "                width: 100%;\n";
	data_tmp_stream << "                border-collapse: collapse;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            thead {\n";
	data_tmp_stream << "                background-color: #edf2f7;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            th {\n";
	data_tmp_stream << "                padding: 15px;\n";
	data_tmp_stream << "                text-align: left;\n";
	data_tmp_stream << "                font-weight: 600;\n";
	data_tmp_stream << "                color: #4a5568;\n";
	data_tmp_stream << "                font-size: 14px;\n";
	data_tmp_stream << "                border-bottom: 2px solid #e2e8f0;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            td {\n";
	data_tmp_stream << "                padding: 15px;\n";
	data_tmp_stream << "                border-bottom: 1px solid #e2e8f0;\n";
	data_tmp_stream << "                font-size: 14px;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            tbody tr:hover {\n";
	data_tmp_stream << "                background-color: #f7fafc;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .status-low {\n";
	data_tmp_stream << "                color: #38a169;\n";
	data_tmp_stream << "                font-weight: 500;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .status-medium {\n";
	data_tmp_stream << "                color: #d69e2e;\n";
	data_tmp_stream << "                font-weight: 500;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .status-high {\n";
	data_tmp_stream << "                color: #e53e3e;\n";
	data_tmp_stream << "                font-weight: 500;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .no-data {\n";
	data_tmp_stream << "                text-align: center;\n";
	data_tmp_stream << "                padding: 40px;\n";
	data_tmp_stream << "                color: #718096;\n";
	data_tmp_stream << "                font-style: italic;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            @media (max-width: 768px) {\n";
	data_tmp_stream << "                .filter-grid {\n";
	data_tmp_stream << "                    grid-template-columns: 1fr;\n";
	data_tmp_stream << "                }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                .button-group {\n";
	data_tmp_stream << "                    flex-direction: column;\n";
	data_tmp_stream << "                }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                .btn {\n";
	data_tmp_stream << "                    width: 100%;\n";
	data_tmp_stream << "                }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                table {\n";
	data_tmp_stream << "                    display: block;\n";
	data_tmp_stream << "                    overflow-x: auto;\n";
	data_tmp_stream << "                }\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            .more-section {\n";
	data_tmp_stream << "                text-align: center;\n";
	data_tmp_stream << "                padding: 25px;\n";
	data_tmp_stream << "                background: white;\n";
	data_tmp_stream << "                border-top: 1px solid #e2e8f0;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            #moreBtn {\n";
	data_tmp_stream << "                padding: 12px 32px;\n";
	data_tmp_stream << "                font-size: 14px;\n";
	data_tmp_stream << "                font-weight: 500;\n";
	data_tmp_stream << "                background-color: #4299e1;\n";
	data_tmp_stream << "                color: white;\n";
	data_tmp_stream << "                border: none;\n";
	data_tmp_stream << "                border-radius: 4px;\n";
	data_tmp_stream << "                cursor: pointer;\n";
	data_tmp_stream << "                transition: background-color 0.2s;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            #moreBtn:hover {\n";
	data_tmp_stream << "                background-color: #3182ce;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            #loading {\n";
	data_tmp_stream << "                color: #718096;\n";
	data_tmp_stream << "                font-size: 14px;\n";
	data_tmp_stream << "            }\n";
	data_tmp_stream << "        </style>\n";
	data_tmp_stream << "    </head>\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    <body>\n";
	data_tmp_stream << "        <div class=\"container\">\n";
	data_tmp_stream << "            <header>\n";
	data_tmp_stream << "                <h1>Sensor Data Dashboard</h1>\n";
	data_tmp_stream << "                <div class=\"subtitle\">Monitor and filter sensor light readings in real-time</div>\n";
	data_tmp_stream << "            </header>\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            <section class=\"filter-section\">\n";
	data_tmp_stream << "                <form id=\"filterForm\" method=\"get\" action=\"/api/data/getData\">\n";
	data_tmp_stream << "                    <div class=\"filter-grid\">\n";
	data_tmp_stream << "                        <div class=\"filter-group\">\n";
	data_tmp_stream << "                            <label for=\"sensor_id\">Sensor ID</label>\n";
	data_tmp_stream << "                            <input type=\"number\" id=\"sensor_id\" name=\"sensor_id\" min=\"0\" placeholder=\"Enter sensor ID\">\n";
	data_tmp_stream << "                        </div>\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        <div class=\"filter-group\">\n";
	data_tmp_stream << "                            <label for=\"date\">Date</label>\n";
	data_tmp_stream << "                            <input type=\"date\" id=\"date\" name=\"date\">\n";
	data_tmp_stream << "                        </div>\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        <div class=\"filter-group\">\n";
	data_tmp_stream << "                            <label for=\"level\">Light Level</label>\n";
	data_tmp_stream << "                            <select id=\"level\" name=\"level\">\n";
	data_tmp_stream << "                                <option value=\"\">All Levels</option>\n";
	data_tmp_stream << "                                <option value=\"low\">Low (0 - 1000 lx)</option>\n";
	data_tmp_stream << "                                <option value=\"medium\">Medium (1000 - 10000 lx)</option>\n";
	data_tmp_stream << "                                <option value=\"high\">High (> 10000 lx)</option>\n";
	data_tmp_stream << "                            </select>\n";
	data_tmp_stream << "                        </div>\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        <div class=\"filter-group\">\n";
	data_tmp_stream << "                            <label>Sort By</label>\n";
	data_tmp_stream << "                            <div class=\"multiselect-container\">\n";
	data_tmp_stream << "                                <div class=\"multiselect-header\" id=\"sortHeader\">Select options</div>\n";
	data_tmp_stream << "                                <div class=\"multiselect-options\" id=\"sortOptions\">\n";
	data_tmp_stream << "                                    <label class=\"multiselect-option\">\n";
	data_tmp_stream << "                                        <input type=\"checkbox\" value=\"date\">\n";
	data_tmp_stream << "                                        Date\n";
	data_tmp_stream << "                                    </label>\n";
	data_tmp_stream << "                                    <label class=\"multiselect-option\">\n";
	data_tmp_stream << "                                        <input type=\"checkbox\" value=\"time\">\n";
	data_tmp_stream << "                                        Time\n";
	data_tmp_stream << "                                    </label>\n";
	data_tmp_stream << "                                    <label class=\"multiselect-option\">\n";
	data_tmp_stream << "                                        <input type=\"checkbox\" value=\"light\">\n";
	data_tmp_stream << "                                        Light Value\n";
	data_tmp_stream << "                                    </label>\n";
	data_tmp_stream << "                                </div>\n";
	data_tmp_stream << "                                <!-- Hidden input for form submission -->\n";
	data_tmp_stream << "                                <select id=\"sortInput\" name=\"sort\" multiple style=\"display: none;\">\n";
	data_tmp_stream << "                                    <option value=\"date\">Date</option>\n";
	data_tmp_stream << "                                    <option value=\"time\">Time</option>\n";
	data_tmp_stream << "                                    <option value=\"light\">Light Value</option>\n";
	data_tmp_stream << "                                </select>\n";
	data_tmp_stream << "                            </div>\n";
	data_tmp_stream << "                        </div>\n";
	data_tmp_stream << "                    </div>\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    <div class=\"button-group\">\n";
	data_tmp_stream << "                        <button type=\"submit\" class=\"btn btn-primary\">Apply Filters</button>\n";
	data_tmp_stream << "                        <button type=\"button\" class=\"btn btn-export\" id=\"exportCsvBtn\">Export CSV</button>\n";
	data_tmp_stream << "                        <button type=\"button\" class=\"btn btn-secondary\" id=\"resetBtn\">Reset Filters</button>\n";
	data_tmp_stream << "                    </div>\n";
	data_tmp_stream << "                </form>\n";
	data_tmp_stream << "            </section>\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            <section class=\"table-container\">\n";
	data_tmp_stream << "                <table id=\"sensorTable\">\n";
	data_tmp_stream << "                    <thead>\n";
	data_tmp_stream << "                        <tr>\n";
	data_tmp_stream << "                            <th>Sensor ID</th>\n";
	data_tmp_stream << "                            <th>Date</th>\n";
	data_tmp_stream << "                            <th>Time</th>\n";
	data_tmp_stream << "                            <th>Light Level (lx)</th>\n";
	data_tmp_stream << "                        </tr>\n";
	data_tmp_stream << "                    </thead>\n";
	data_tmp_stream << "                    <tbody id=\"tableBody\">\n";
	data_tmp_stream << "                        ";
 for(auto row:data){ 
	data_tmp_stream << "                            <tr>\n";
	data_tmp_stream << "                                <td>";
data_tmp_stream<<row["sensor_id"];
	data_tmp_stream << "</td>\n";
	data_tmp_stream << "                                <td>";
data_tmp_stream<<row["date"];
	data_tmp_stream << "</td>\n";
	data_tmp_stream << "                                <td>";
data_tmp_stream<<row["time"];
	data_tmp_stream << "</td>\n";
	data_tmp_stream << "                                <td>";
data_tmp_stream<<row["light"];
	data_tmp_stream << "</td>\n";
	data_tmp_stream << "                            </tr>\n";
	data_tmp_stream << "                            ";
 } 
data_tmp_stream<<"\n";
	data_tmp_stream << "                    </tbody>\n";
	data_tmp_stream << "                </table>\n";
	data_tmp_stream << "                <div class=\"more-section\"\n";
	data_tmp_stream << "                    style=\"text-align: center; padding: 20px; background: white; border-top: 1px solid #e2e8f0;\">\n";
	data_tmp_stream << "                    <button type=\"button\" class=\"btn btn-primary\" id=\"moreBtn\">\n";
	data_tmp_stream << "                        Load More (+30 records)\n";
	data_tmp_stream << "                    </button>\n";
	data_tmp_stream << "                    <div id=\"loading\" style=\"display: none;\">\n";
	data_tmp_stream << "                        <span style=\"color: #718096;\">Loading more data...</span>\n";
	data_tmp_stream << "                    </div>\n";
	data_tmp_stream << "                </div>\n";
	data_tmp_stream << "            </section>\n";
	data_tmp_stream << "        </div>\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "        <script>\n";
	data_tmp_stream << "            document.addEventListener('DOMContentLoaded', function () {\n";
	data_tmp_stream << "                // Multiselect functionality\n";
	data_tmp_stream << "                const sortHeader = document.getElementById('sortHeader');\n";
	data_tmp_stream << "                const sortOptions = document.getElementById('sortOptions');\n";
	data_tmp_stream << "                const sortCheckboxes = sortOptions.querySelectorAll('input[type=\"checkbox\"]');\n";
	data_tmp_stream << "                const sortInput = document.getElementById('sortInput');\n";
	data_tmp_stream << "                const resetBtn = document.getElementById('resetBtn');\n";
	data_tmp_stream << "                const exportCsvBtn = document.getElementById('exportCsvBtn');\n";
	data_tmp_stream << "                const filterForm = document.getElementById('filterForm');\n";
	data_tmp_stream << "                const tableBody = document.getElementById('tableBody');\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                // Toggle multiselect dropdown\n";
	data_tmp_stream << "                sortHeader.addEventListener('click', function (e) {\n";
	data_tmp_stream << "                    e.stopPropagation();\n";
	data_tmp_stream << "                    sortOptions.classList.toggle('active');\n";
	data_tmp_stream << "                });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                // Close dropdown when clicking outside\n";
	data_tmp_stream << "                document.addEventListener('click', function () {\n";
	data_tmp_stream << "                    sortOptions.classList.remove('active');\n";
	data_tmp_stream << "                });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                // Prevent dropdown close when clicking inside\n";
	data_tmp_stream << "                sortOptions.addEventListener('click', function (e) {\n";
	data_tmp_stream << "                    e.stopPropagation();\n";
	data_tmp_stream << "                });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                // Handle checkbox changes\n";
	data_tmp_stream << "                sortCheckboxes.forEach(checkbox => {\n";
	data_tmp_stream << "                    checkbox.addEventListener('change', function () {\n";
	data_tmp_stream << "                        updateSortDisplay();\n";
	data_tmp_stream << "                        updateSortInput();\n";
	data_tmp_stream << "                        sortTable();\n";
	data_tmp_stream << "                    });\n";
	data_tmp_stream << "                });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                // Reset button functionality\n";
	data_tmp_stream << "                resetBtn.addEventListener('click', function () {\n";
	data_tmp_stream << "                    // Reset form inputs\n";
	data_tmp_stream << "                    filterForm.reset();\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    // Reset sort checkboxes\n";
	data_tmp_stream << "                    sortCheckboxes.forEach(cb => cb.checked = false);\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    // Reset sort display\n";
	data_tmp_stream << "                    sortHeader.textContent = 'Select options';\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    // Reset sort input\n";
	data_tmp_stream << "                    Array.from(sortInput.options).forEach(option => option.selected = false);\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    // Reset table sorting\n";
	data_tmp_stream << "                    resetTable();\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    // Optional: Clear URL parameters without reloading\n";
	data_tmp_stream << "                    window.history.replaceState({}, document.title, window.location.pathname);\n";
	data_tmp_stream << "                });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                // Export CSV file function\n";
	data_tmp_stream << "                exportCsvBtn.addEventListener('click', function () {\n";
	data_tmp_stream << "                    updateSortInput();\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    const formData = new FormData(filterForm);\n";
	data_tmp_stream << "                    const params = new URLSearchParams();\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    for (let [key, value] of formData.entries()) {\n";
	data_tmp_stream << "                        if (value) {\n";
	data_tmp_stream << "                            if (key === 'sort') {\n";
	data_tmp_stream << "                                // sort lÃ  multiple\n";
	data_tmp_stream << "                                const existing = params.get('sort');\n";
	data_tmp_stream << "                                params.set('sort', existing ? `${existing},${value}` : value);\n";
	data_tmp_stream << "                            } else {\n";
	data_tmp_stream << "                                params.append(key, value);\n";
	data_tmp_stream << "                            }\n";
	data_tmp_stream << "                        }\n";
	data_tmp_stream << "                    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    window.location.href = \"/api/data/exportCsv?\" + params.toString();\n";
	data_tmp_stream << "                });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                // Form submission handler (for demo purposes)\n";
	data_tmp_stream << "                filterForm.addEventListener('submit', function (e) {\n";
	data_tmp_stream << "                    // Update hidden sort input before submission\n";
	data_tmp_stream << "                    updateSortInput();\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    // Get form data\n";
	data_tmp_stream << "                    const formData = new FormData(filterForm);\n";
	data_tmp_stream << "                    const params = new URLSearchParams();\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    // Build query string\n";
	data_tmp_stream << "                    for (let [key, value] of formData.entries()) {\n";
	data_tmp_stream << "                        if (value) {\n";
	data_tmp_stream << "                            if (key === 'sort') {\n";
	data_tmp_stream << "                                // Handle multiple sort values\n";
	data_tmp_stream << "                                const existing = params.get('sort');\n";
	data_tmp_stream << "                                params.set('sort', existing ? `${existing},${value}` : value);\n";
	data_tmp_stream << "                            } else {\n";
	data_tmp_stream << "                                params.append(key, value);\n";
	data_tmp_stream << "                            }\n";
	data_tmp_stream << "                        }\n";
	data_tmp_stream << "                    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    // For demo: show what would be submitted\n";
	data_tmp_stream << "                    console.log('Submitting with params:', params.toString());\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    // In real implementation, you would:\n";
	data_tmp_stream << "                    // 1. Make an AJAX request to /api/data/getData\n";
	data_tmp_stream << "                    // 2. Update table with response data\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    // Demo: simulate API call with timeout\n";
	data_tmp_stream << "                    simulateApiCall(params);\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    // To actually submit the form, uncomment:\n";
	data_tmp_stream << "                    this.submit();\n";
	data_tmp_stream << "                });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                // Helper functions\n";
	data_tmp_stream << "                function updateSortDisplay() {\n";
	data_tmp_stream << "                    const selected = Array.from(sortCheckboxes)\n";
	data_tmp_stream << "                        .filter(cb => cb.checked)\n";
	data_tmp_stream << "                        .map(cb => cb.parentElement.textContent.trim());\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    sortHeader.textContent = selected.length > 0 ? selected.join(', ') : 'Select options';\n";
	data_tmp_stream << "                }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                function updateSortInput() {\n";
	data_tmp_stream << "                    // Clear all selections\n";
	data_tmp_stream << "                    Array.from(sortInput.options).forEach(option => {\n";
	data_tmp_stream << "                        option.selected = false;\n";
	data_tmp_stream << "                    });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    // Set selected options\n";
	data_tmp_stream << "                    sortCheckboxes.forEach(checkbox => {\n";
	data_tmp_stream << "                        if (checkbox.checked) {\n";
	data_tmp_stream << "                            const option = Array.from(sortInput.options).find(opt => opt.value === checkbox.value);\n";
	data_tmp_stream << "                            if (option) option.selected = true;\n";
	data_tmp_stream << "                        }\n";
	data_tmp_stream << "                    });\n";
	data_tmp_stream << "                }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                function sortTable() {\n";
	data_tmp_stream << "                    const selectedSorts = Array.from(sortCheckboxes)\n";
	data_tmp_stream << "                        .filter(cb => cb.checked)\n";
	data_tmp_stream << "                        .map(cb => cb.value);\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    if (selectedSorts.length === 0) {\n";
	data_tmp_stream << "                        resetTable();\n";
	data_tmp_stream << "                        return;\n";
	data_tmp_stream << "                    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    const rows = Array.from(tableBody.querySelectorAll('tr'));\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    rows.sort((a, b) => {\n";
	data_tmp_stream << "                        const aCells = a.querySelectorAll('td');\n";
	data_tmp_stream << "                        const bCells = b.querySelectorAll('td');\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        for (let sortBy of selectedSorts) {\n";
	data_tmp_stream << "                            let comparison = 0;\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                            switch (sortBy) {\n";
	data_tmp_stream << "                                case 'date':\n";
	data_tmp_stream << "                                    comparison = new Date(aCells[1].textContent) - new Date(bCells[1].textContent);\n";
	data_tmp_stream << "                                    break;\n";
	data_tmp_stream << "                                case 'time':\n";
	data_tmp_stream << "                                    comparison = aCells[2].textContent.localeCompare(bCells[2].textContent);\n";
	data_tmp_stream << "                                    break;\n";
	data_tmp_stream << "                                case 'light':\n";
	data_tmp_stream << "                                    const aValue = parseFloat(aCells[3].textContent.replace(',', ''));\n";
	data_tmp_stream << "                                    const bValue = parseFloat(bCells[3].textContent.replace(',', ''));\n";
	data_tmp_stream << "                                    comparison = aValue - bValue;\n";
	data_tmp_stream << "                                    break;\n";
	data_tmp_stream << "                            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                            if (comparison !== 0) return comparison;\n";
	data_tmp_stream << "                        }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        return 0;\n";
	data_tmp_stream << "                    });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    // Reorder rows\n";
	data_tmp_stream << "                    tableBody.innerHTML = '';\n";
	data_tmp_stream << "                    rows.forEach(row => tableBody.appendChild(row));\n";
	data_tmp_stream << "                }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                function resetTable() {\n";
	data_tmp_stream << "                    // In a real app, you would reload original data from server\n";
	data_tmp_stream << "                    // For demo, we'll just re-sort by sensor ID\n";
	data_tmp_stream << "                    const rows = Array.from(tableBody.querySelectorAll('tr'));\n";
	data_tmp_stream << "                    rows.sort((a, b) => {\n";
	data_tmp_stream << "                        const aId = parseInt(a.querySelector('td').textContent);\n";
	data_tmp_stream << "                        const bId = parseInt(b.querySelector('td').textContent);\n";
	data_tmp_stream << "                        return aId - bId;\n";
	data_tmp_stream << "                    });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    tableBody.innerHTML = '';\n";
	data_tmp_stream << "                    rows.forEach(row => tableBody.appendChild(row));\n";
	data_tmp_stream << "                }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                // Demo function to simulate API call\n";
	data_tmp_stream << "                function simulateApiCall(params) {\n";
	data_tmp_stream << "                    // Show loading state\n";
	data_tmp_stream << "                    const submitBtn = filterForm.querySelector('button[type=\"submit\"]');\n";
	data_tmp_stream << "                    const originalText = submitBtn.textContent;\n";
	data_tmp_stream << "                    submitBtn.textContent = 'Loading...';\n";
	data_tmp_stream << "                    submitBtn.disabled = true;\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    // Simulate API delay\n";
	data_tmp_stream << "                    setTimeout(() => {\n";
	data_tmp_stream << "                        // Update table with filtered data (demo)\n";
	data_tmp_stream << "                        const filteredRows = filterTableData(params);\n";
	data_tmp_stream << "                        updateTable(filteredRows);\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        // Restore button state\n";
	data_tmp_stream << "                        submitBtn.textContent = originalText;\n";
	data_tmp_stream << "                        submitBtn.disabled = false;\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        // Show notification\n";
	data_tmp_stream << "                        showNotification(`Applied filters: ${getFilterSummary(params)}`);\n";
	data_tmp_stream << "                    }, 800);\n";
	data_tmp_stream << "                }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                // Demo data filtering (in real app, this would be server-side)\n";
	data_tmp_stream << "                function filterTableData(params) {\n";
	data_tmp_stream << "                    const allRows = Array.from(tableBody.querySelectorAll('tr'));\n";
	data_tmp_stream << "                    const sensorId = params.get('sensor_id');\n";
	data_tmp_stream << "                    const date = params.get('date');\n";
	data_tmp_stream << "                    const level = params.get('level');\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    return allRows.filter(row => {\n";
	data_tmp_stream << "                        const cells = row.querySelectorAll('td');\n";
	data_tmp_stream << "                        const rowSensorId = cells[0].textContent;\n";
	data_tmp_stream << "                        const rowDate = cells[1].textContent;\n";
	data_tmp_stream << "                        const rowLight = parseFloat(cells[3].textContent.replace(',', ''));\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        // Filter by sensor ID\n";
	data_tmp_stream << "                        if (sensorId && rowSensorId !== sensorId) return false;\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        // Filter by date\n";
	data_tmp_stream << "                        if (date && rowDate !== date) return false;\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        // Filter by level\n";
	data_tmp_stream << "                        if (level) {\n";
	data_tmp_stream << "                            if (level === 'low' && rowLight >= 1000) return false;\n";
	data_tmp_stream << "                            if (level === 'medium' && (rowLight < 1000 || rowLight > 10000)) return false;\n";
	data_tmp_stream << "                            if (level === 'high' && rowLight <= 10000) return false;\n";
	data_tmp_stream << "                        }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        return true;\n";
	data_tmp_stream << "                    });\n";
	data_tmp_stream << "                }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                function updateTable(rows) {\n";
	data_tmp_stream << "                    tableBody.innerHTML = '';\n";
	data_tmp_stream << "                    if (rows.length === 0) {\n";
	data_tmp_stream << "                        tableBody.innerHTML = '<tr><td colspan=\"4\" class=\"no-data\">No data matching the selected filters</td></tr>';\n";
	data_tmp_stream << "                    } else {\n";
	data_tmp_stream << "                        rows.forEach(row => tableBody.appendChild(row.cloneNode(true)));\n";
	data_tmp_stream << "                    }\n";
	data_tmp_stream << "                }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                function getFilterSummary(params) {\n";
	data_tmp_stream << "                    const filters = [];\n";
	data_tmp_stream << "                    if (params.get('sensor_id')) filters.push(`Sensor ID: ${params.get('sensor_id')}`);\n";
	data_tmp_stream << "                    if (params.get('date')) filters.push(`Date: ${params.get('date')}`);\n";
	data_tmp_stream << "                    if (params.get('level')) filters.push(`Level: ${params.get('level')}`);\n";
	data_tmp_stream << "                    if (params.get('sort')) filters.push(`Sort: ${params.get('sort')}`);\n";
	data_tmp_stream << "                    return filters.length > 0 ? filters.join(', ') : 'All data';\n";
	data_tmp_stream << "                }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                function showNotification(message) {\n";
	data_tmp_stream << "                    // Create notification element\n";
	data_tmp_stream << "                    const notification = document.createElement('div');\n";
	data_tmp_stream << "                    notification.style.cssText = `\n";
	data_tmp_stream << "                    position: fixed;\n";
	data_tmp_stream << "                    top: 20px;\n";
	data_tmp_stream << "                    right: 20px;\n";
	data_tmp_stream << "                    background: #4299e1;\n";
	data_tmp_stream << "                    color: white;\n";
	data_tmp_stream << "                    padding: 12px 20px;\n";
	data_tmp_stream << "                    border-radius: 4px;\n";
	data_tmp_stream << "                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n";
	data_tmp_stream << "                    z-index: 1000;\n";
	data_tmp_stream << "                    animation: slideIn 0.3s ease;\n";
	data_tmp_stream << "                `;\n";
	data_tmp_stream << "                    notification.textContent = message;\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    document.body.appendChild(notification);\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    // Remove after 3 seconds\n";
	data_tmp_stream << "                    setTimeout(() => {\n";
	data_tmp_stream << "                        notification.style.animation = 'slideOut 0.3s ease';\n";
	data_tmp_stream << "                        setTimeout(() => notification.remove(), 300);\n";
	data_tmp_stream << "                    }, 3000);\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    // Add CSS animation\n";
	data_tmp_stream << "                    if (!document.querySelector('#notification-styles')) {\n";
	data_tmp_stream << "                        const style = document.createElement('style');\n";
	data_tmp_stream << "                        style.id = 'notification-styles';\n";
	data_tmp_stream << "                        style.textContent = `\n";
	data_tmp_stream << "                        @keyframes slideIn {\n";
	data_tmp_stream << "                            from { transform: translateX(100%); opacity: 0; }\n";
	data_tmp_stream << "                            to { transform: translateX(0); opacity: 1; }\n";
	data_tmp_stream << "                        }\n";
	data_tmp_stream << "                        @keyframes slideOut {\n";
	data_tmp_stream << "                            from { transform: translateX(0); opacity: 1; }\n";
	data_tmp_stream << "                            to { transform: translateX(100%); opacity: 0; }\n";
	data_tmp_stream << "                        }\n";
	data_tmp_stream << "                    `;\n";
	data_tmp_stream << "                        document.head.appendChild(style);\n";
	data_tmp_stream << "                    }\n";
	data_tmp_stream << "                }\n";
	data_tmp_stream << "                // More button functionality\n";
	data_tmp_stream << "                const moreBtn = document.getElementById('moreBtn');\n";
	data_tmp_stream << "                const loadingDiv = document.getElementById('loading');\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                if (moreBtn) {\n";
	data_tmp_stream << "                    moreBtn.addEventListener('click', function () {\n";
	data_tmp_stream << "                        // Disable button and show loading\n";
	data_tmp_stream << "                        moreBtn.style.display = 'none';\n";
	data_tmp_stream << "                        loadingDiv.style.display = 'block';\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        // Get current offset from URL\n";
	data_tmp_stream << "                        const urlParams = new URLSearchParams(window.location.search);\n";
	data_tmp_stream << "                        let currentOffset = parseInt(urlParams.get('offset') || '0');\n";
	data_tmp_stream << "                        const newOffset = currentOffset + 30;\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        // Build new URL with updated offset\n";
	data_tmp_stream << "                        const formData = new FormData(filterForm);\n";
	data_tmp_stream << "                        const params = new URLSearchParams();\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        // Add all filter parameters\n";
	data_tmp_stream << "                        for (let [key, value] of formData.entries()) {\n";
	data_tmp_stream << "                            if (value) {\n";
	data_tmp_stream << "                                if (key === 'sort') {\n";
	data_tmp_stream << "                                    const existing = params.get('sort');\n";
	data_tmp_stream << "                                    params.set('sort', existing ? `${existing},${value}` : value);\n";
	data_tmp_stream << "                                } else {\n";
	data_tmp_stream << "                                    params.append(key, value);\n";
	data_tmp_stream << "                                }\n";
	data_tmp_stream << "                            }\n";
	data_tmp_stream << "                        }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        // Add offset parameter\n";
	data_tmp_stream << "                        params.set('offset', newOffset.toString());\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        // Make AJAX request\n";
	data_tmp_stream << "                        fetch(`/api/data/getData?${params.toString()}`, {\n";
	data_tmp_stream << "                            method: 'GET',\n";
	data_tmp_stream << "                            headers: {\n";
	data_tmp_stream << "                                'Accept': 'text/html'\n";
	data_tmp_stream << "                            }\n";
	data_tmp_stream << "                        })\n";
	data_tmp_stream << "                            .then(response => response.text())\n";
	data_tmp_stream << "                            .then(html => {\n";
	data_tmp_stream << "                                // Parse the HTML response\n";
	data_tmp_stream << "                                const parser = new DOMParser();\n";
	data_tmp_stream << "                                const doc = parser.parseFromString(html, 'text/html');\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                                // Extract new rows from the response\n";
	data_tmp_stream << "                                const newRows = doc.querySelectorAll('#tableBody tr');\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                                // Append new rows to current table\n";
	data_tmp_stream << "                                const tableBody = document.getElementById('tableBody');\n";
	data_tmp_stream << "                                newRows.forEach(row => {\n";
	data_tmp_stream << "                                    tableBody.appendChild(row.cloneNode(true));\n";
	data_tmp_stream << "                                });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                                // Update URL without reloading page\n";
	data_tmp_stream << "                                const newUrl = `${window.location.pathname}?${params.toString()}`;\n";
	data_tmp_stream << "                                window.history.pushState({}, '', newUrl);\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                                // Check if there are more records (if less than 30, hide button)\n";
	data_tmp_stream << "                                const newRowCount = newRows.length;\n";
	data_tmp_stream << "                                if (newRowCount >= 30) {\n";
	data_tmp_stream << "                                    moreBtn.style.display = 'block';\n";
	data_tmp_stream << "                                }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                                // Hide loading\n";
	data_tmp_stream << "                                loadingDiv.style.display = 'none';\n";
	data_tmp_stream << "                            })\n";
	data_tmp_stream << "                            .catch(error => {\n";
	data_tmp_stream << "                                console.error('Error loading more data:', error);\n";
	data_tmp_stream << "                                moreBtn.style.display = 'block';\n";
	data_tmp_stream << "                                loadingDiv.style.display = 'none';\n";
	data_tmp_stream << "                                alert('Failed to load more data. Please try again.');\n";
	data_tmp_stream << "                            });\n";
	data_tmp_stream << "                    });\n";
	data_tmp_stream << "                }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                // Also update the reset button to reset offset\n";
	data_tmp_stream << "                resetBtn.addEventListener('click', function () {\n";
	data_tmp_stream << "                    // ... existing reset code remains ...\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    // Reset offset in URL (add this line)\n";
	data_tmp_stream << "                    const url = new URL(window.location);\n";
	data_tmp_stream << "                    url.searchParams.delete('offset');\n";
	data_tmp_stream << "                    window.history.replaceState({}, '', url);\n";
	data_tmp_stream << "                });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                // Update form submission to reset offset\n";
	data_tmp_stream << "                filterForm.addEventListener('submit', function (e) {\n";
	data_tmp_stream << "                    // Remove offset when applying new filters\n";
	data_tmp_stream << "                    const url = new URL(window.location);\n";
	data_tmp_stream << "                    url.searchParams.delete('offset');\n";
	data_tmp_stream << "                    window.history.replaceState({}, '', url);\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    // ... rest of existing submit code remains ...\n";
	data_tmp_stream << "                });\n";
	data_tmp_stream << "                // Initialize\n";
	data_tmp_stream << "                updateSortDisplay();\n";
	data_tmp_stream << "            });\n";
	data_tmp_stream << "        </script>\n";
	data_tmp_stream << "    </body>\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "</html>\n";
if(layoutName.empty())
{
std::string ret{std::move(data_tmp_stream.str())};
return ret;
}else
{
auto templ = DrTemplateBase::newTemplate(layoutName);
if(!templ) return "";
HttpViewData data = data_view_data;
auto str = std::move(data_tmp_stream.str());
if(!str.empty() && str[str.length()-1] == '\n') str.resize(str.length()-1);
data[""] = std::move(str);
return templ->genText(data);
}
}
