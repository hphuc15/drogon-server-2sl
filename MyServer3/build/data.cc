//this file is generated by program(drogon_ctl) automatically,don't modify it!
#include "data.h"
#include <drogon/utils/OStringStream.h>
#include <drogon/utils/Utilities.h>
#include <string>
#include <map>
#include <vector>
#include <set>
#include <iostream>
#include <unordered_map>
#include <unordered_set>
#include <algorithm>
#include <list>
#include <deque>
#include <queue>
using namespace drogon;
std::string data::genText(const DrTemplateData& data_view_data)
{
	drogon::OStringStream data_tmp_stream;
	std::string layoutName{""};
	data_tmp_stream << "<!DOCTYPE html>\n";
	data_tmp_stream << "<html>\n";
 auto data=data_view_data.get<std::vector<std::map<std::string, std::string>>>("data");
    
data_tmp_stream<<"\n";
	data_tmp_stream << "    <head>\n";
	data_tmp_stream << "        <meta charset=\"UTF-8\">\n";
	data_tmp_stream << "        <title>\n";
	data_tmp_stream << "            Sensor Data\n";
	data_tmp_stream << "        </title>\n";
	data_tmp_stream << "        <h1>Sensor Data</h1>\n";
	data_tmp_stream << "    </head>\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    <body>\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "        <div class=\"filter-container\">\n";
	data_tmp_stream << "            <div class=\"filter-row\">\n";
	data_tmp_stream << "                <!-- Test filter-->\n";
	data_tmp_stream << "                <form action=\"/api/data/getData\" method=\"get\" target=\"_self\">\n";
	data_tmp_stream << "                    <div class=\"field\">\n";
	data_tmp_stream << "                        <label for=\"sensor_id\">Sensor ID</label><br>\n";
	data_tmp_stream << "                        <input type=\"number\" id=\"sensor_id\" name=\"sensor_id\"><br>\n";
	data_tmp_stream << "                    </div>\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    <div class=\"field\">\n";
	data_tmp_stream << "                        <label for=\"date\">Date</label><br>\n";
	data_tmp_stream << "                        <input type=\"date\" id=\"date\" name=\"date\"><br>\n";
	data_tmp_stream << "                    </div>\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    <div class=\"field\">\n";
	data_tmp_stream << "                        <label for=\"level\">Select Light Level</label><br>\n";
	data_tmp_stream << "                        <select id=\"level\" name=\"level\">\n";
	data_tmp_stream << "                            <option value=\"\">All</option>\n";
	data_tmp_stream << "                            <option value=\"low\">Low (0 - 1000)</option>\n";
	data_tmp_stream << "                            <option value=\"medium\">Medium (1000 - 10000)</option>\n";
	data_tmp_stream << "                            <option value=\"high\">High (> 10000)</option>\n";
	data_tmp_stream << "                        </select><br>\n";
	data_tmp_stream << "                    </div>\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    <div class=\"field\">\n";
	data_tmp_stream << "                        <label for=\"sort\">Sort by</label><br>\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        <select id=\"sort-display\" multiple style=\"display: none;\">\n";
	data_tmp_stream << "                            <option value=\"date\">Date</option>\n";
	data_tmp_stream << "                            <option value=\"time\">Time</option>\n";
	data_tmp_stream << "                            <option value=\"light\">Value</option>\n";
	data_tmp_stream << "                        </select>\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        <div class=\"custom-multiselect\">\n";
	data_tmp_stream << "                            <div class=\"selected-items\" id=\"selected-sort-items\">Select sort options</div>\n";
	data_tmp_stream << "                            <div class=\"dropdown-options\" id=\"sort-options\">\n";
	data_tmp_stream << "                                <label class=\"option-item\">\n";
	data_tmp_stream << "                                    Date<input type=\"checkbox\" value=\"date\">\n";
	data_tmp_stream << "                                </label>\n";
	data_tmp_stream << "                                <label class=\"option-item\">\n";
	data_tmp_stream << "                                    Time <input type=\"checkbox\" value=\"time\">\n";
	data_tmp_stream << "                                </label>\n";
	data_tmp_stream << "                                <label class=\"option-item\">\n";
	data_tmp_stream << "                                    Value<input type=\"checkbox\" value=\"light\">\n";
	data_tmp_stream << "                                </label>\n";
	data_tmp_stream << "                            </div>\n";
	data_tmp_stream << "                        </div>\n";
	data_tmp_stream << "                        <br><br>\n";
	data_tmp_stream << "                    </div>\n";
	data_tmp_stream << "                    <div class=\"filter-actions\">\n";
	data_tmp_stream << "                        <button type=\"submit\" id=\"apply-button\">Apply</button>\n";
	data_tmp_stream << "                        <button type=\"button\" id=\"reset-button\">Reset</button>\n";
	data_tmp_stream << "                    </div>\n";
	data_tmp_stream << "                </form>\n";
	data_tmp_stream << "            </div>\n";
	data_tmp_stream << "        </div>\n";
	data_tmp_stream << "        <br>\n";
	data_tmp_stream << "        <table id=\"sensor-table\">\n";
	data_tmp_stream << "            <tr>\n";
	data_tmp_stream << "                <th>Sensor ID</th>\n";
	data_tmp_stream << "                <th>Date</th>\n";
	data_tmp_stream << "                <th>Time</th>\n";
	data_tmp_stream << "                <th>Light (lx)</th>\n";
	data_tmp_stream << "            </tr>\n";
	data_tmp_stream << "            ";
 for(auto row : data){ 
	data_tmp_stream << "                <tr>\n";
	data_tmp_stream << "                    <td>";
data_tmp_stream<<row["sensor_id"];
	data_tmp_stream << "</td>\n";
	data_tmp_stream << "                    <td>";
data_tmp_stream<<row["date"];
	data_tmp_stream << "</td>\n";
	data_tmp_stream << "                    <td>";
data_tmp_stream<<row["time"];
	data_tmp_stream << "</td>\n";
	data_tmp_stream << "                    <td>";
data_tmp_stream<<row["light"];
	data_tmp_stream << "</td>\n";
	data_tmp_stream << "                </tr>\n";
	data_tmp_stream << "                ";
 } 
	data_tmp_stream << "        </table>\n";
	data_tmp_stream << "    </body>\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "</html>\n";
data_tmp_stream<<"\n";
data_tmp_stream<<"\n";
data_tmp_stream<<"\n";
data_tmp_stream<<"\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "<style>\n";
	data_tmp_stream << "    body {\n";
	data_tmp_stream << "        font-family: 'Consolas', Tahoma, Geneva, Verdana, sans-serif;\n";
	data_tmp_stream << "        margin: 20px;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    table {\n";
	data_tmp_stream << "        border-collapse: collapse;\n";
	data_tmp_stream << "        width: 100%;\n";
	data_tmp_stream << "        margin: auto;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    th,\n";
	data_tmp_stream << "    td {\n";
	data_tmp_stream << "        border: 1px solid #ccc;\n";
	data_tmp_stream << "        padding: 8px 12px;\n";
	data_tmp_stream << "        text-align: center;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    th {\n";
	data_tmp_stream << "        background-color: #f2f2f2;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    h1 {\n";
	data_tmp_stream << "        text-align: center;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    /* Data Filter*/\n";
	data_tmp_stream << "    .filter-container {\n";
	data_tmp_stream << "        padding: 20px;\n";
	data_tmp_stream << "        background-color: #f8f9fa;\n";
	data_tmp_stream << "        border: 1px solid #ccc;\n";
	data_tmp_stream << "        border-collapse: collapse;\n";
	data_tmp_stream << "        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    .filter-row {\n";
	data_tmp_stream << "        margin-bottom: 20px;\n";
	data_tmp_stream << "        position: relative;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    .filter-row form {\n";
	data_tmp_stream << "        display: grid;\n";
	data_tmp_stream << "        grid-template-columns: 1fr 1fr;\n";
	data_tmp_stream << "        gap: 10px;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    .field {\n";
	data_tmp_stream << "        position: relative;\n";
	data_tmp_stream << "        width: 100%;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    .field input,\n";
	data_tmp_stream << "    .field select {\n";
	data_tmp_stream << "        width: 100%;\n";
	data_tmp_stream << "        padding: 10px 12px;\n";
	data_tmp_stream << "        border: 2px solid #e1e8ed;\n";
	data_tmp_stream << "        border-radius: 6px;\n";
	data_tmp_stream << "        font-size: 14px;\n";
	data_tmp_stream << "        transition: all 0.3s ease;\n";
	data_tmp_stream << "        box-sizing: border-box;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    .filter-row label {\n";
	data_tmp_stream << "        font-weight: 600;\n";
	data_tmp_stream << "        color: #2c3e50;\n";
	data_tmp_stream << "        font-size: 14px;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    .filter-row input[type=\"number\"]:focus,\n";
	data_tmp_stream << "    .filter-row input[type=\"date\"]:focus,\n";
	data_tmp_stream << "    .filter-row select:focus {\n";
	data_tmp_stream << "        outline: none;\n";
	data_tmp_stream << "        border-color: #3498db;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    .filter-row input[type=\"submit\"] {\n";
	data_tmp_stream << "        padding: 12px 20px;\n";
	data_tmp_stream << "        background-color: #3498db;\n";
	data_tmp_stream << "        color: white;\n";
	data_tmp_stream << "        border: none;\n";
	data_tmp_stream << "        border-radius: 6px;\n";
	data_tmp_stream << "        font-size: 16px;\n";
	data_tmp_stream << "        font-weight: 60;\n";
	data_tmp_stream << "        cursor: pointer;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    .filter-row input[type=\"submit\"]:hover {\n";
	data_tmp_stream << "        background-color: #2980b9;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    .filter-actions {\n";
	data_tmp_stream << "        display: flex;\n";
	data_tmp_stream << "        gap: 10px;\n";
	data_tmp_stream << "        justify-content: center;\n";
	data_tmp_stream << "        margin-top: 10px;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    .filter-actions button {\n";
	data_tmp_stream << "        padding: 10px 20px;\n";
	data_tmp_stream << "        border: none;\n";
	data_tmp_stream << "        border-radius: 6px;\n";
	data_tmp_stream << "        font-size: 14px;\n";
	data_tmp_stream << "        font-weight: 600;\n";
	data_tmp_stream << "        cursor: pointer;\n";
	data_tmp_stream << "        transition: all 0.3s ease;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    #apply-button {\n";
	data_tmp_stream << "        background-color: #27ae60;\n";
	data_tmp_stream << "        color: white;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    #apply-button:hover {\n";
	data_tmp_stream << "        background-color: #219a52;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    #reset-button {\n";
	data_tmp_stream << "        background-color: #e74c3c;\n";
	data_tmp_stream << "        color: white;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    #resetbutton:hover {\n";
	data_tmp_stream << "        background-color: #c0392b;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    /* Responsive design */\n";
	data_tmp_stream << "    @media (max-width: 480px) {\n";
	data_tmp_stream << "        .filter-container {\n";
	data_tmp_stream << "            margin: 10px;\n";
	data_tmp_stream << "            padding: 15px;\n";
	data_tmp_stream << "        }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "        .filter-actions {\n";
	data_tmp_stream << "            flex-direction: column;\n";
	data_tmp_stream << "        }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "        .filter-actions button {\n";
	data_tmp_stream << "            width: 100%;\n";
	data_tmp_stream << "        }\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    /* Style for select dropdown */\n";
	data_tmp_stream << "    .filter-row select {\n";
	data_tmp_stream << "        appearance: none;\n";
	data_tmp_stream << "        background-image: url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e\");\n";
	data_tmp_stream << "        background-repeat: no-repeat;\n";
	data_tmp_stream << "        background-position: right 12px center;\n";
	data_tmp_stream << "        background-size: 16px;\n";
	data_tmp_stream << "        padding-right: 40px;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    /* Custom multiselect styles */\n";
	data_tmp_stream << "    .custom-multiselect {\n";
	data_tmp_stream << "        position: relative;\n";
	data_tmp_stream << "        width: 100%;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    .selected-items {\n";
	data_tmp_stream << "        width: 100%;\n";
	data_tmp_stream << "        padding: 10px 12px;\n";
	data_tmp_stream << "        border: 2px solid #e1e8ed;\n";
	data_tmp_stream << "        border-radius: 6px;\n";
	data_tmp_stream << "        font-size: 14px;\n";
	data_tmp_stream << "        background-color: white;\n";
	data_tmp_stream << "        cursor: pointer;\n";
	data_tmp_stream << "        background-image: url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e\");\n";
	data_tmp_stream << "        background-repeat: no-repeat;\n";
	data_tmp_stream << "        background-position: right 12px center;\n";
	data_tmp_stream << "        background-size: 16px;\n";
	data_tmp_stream << "        padding-right: 40px;\n";
	data_tmp_stream << "        box-sizing: border-box;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    .dropdown-options {\n";
	data_tmp_stream << "        display: none;\n";
	data_tmp_stream << "        position: absolute;\n";
	data_tmp_stream << "        top: 100%;\n";
	data_tmp_stream << "        left: 0;\n";
	data_tmp_stream << "        right: 0;\n";
	data_tmp_stream << "        background: white;\n";
	data_tmp_stream << "        border: 2px solid #e1e8ed;\n";
	data_tmp_stream << "        border-top: none;\n";
	data_tmp_stream << "        border-radius: 0 0 6px 6px;\n";
	data_tmp_stream << "        z-index: 1000;\n";
	data_tmp_stream << "        max-height: 200px;\n";
	data_tmp_stream << "        overflow-y: auto;\n";
	data_tmp_stream << "        box-sizing: border-box;\n";
	data_tmp_stream << "        padding: 8px 0;\n";
	data_tmp_stream << "        /* Thêm padding top/bottom */\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    .dropdown-options.show {\n";
	data_tmp_stream << "        display: block;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
data_tmp_stream<<"\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    .option-item {\n";
	data_tmp_stream << "        display: grid;\n";
	data_tmp_stream << "        grid-template-columns: 20px 1fr;\n";
	data_tmp_stream << "        /* Cột checkbox 20px, còn lại cho text */\n";
	data_tmp_stream << "        align-items: center;\n";
	data_tmp_stream << "        gap: 12px;\n";
	data_tmp_stream << "        /* Khoảng cách giữa checkbox và text */\n";
	data_tmp_stream << "        padding: 8px 16px;\n";
	data_tmp_stream << "        /* Điều chỉnh padding */\n";
	data_tmp_stream << "        cursor: pointer;\n";
	data_tmp_stream << "        border-bottom: 1px solid #f0f0f0;\n";
	data_tmp_stream << "        margin: 0;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    .option-item:hover {\n";
	data_tmp_stream << "        background-color: #f8f9fa;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    .option-item:last-child {\n";
	data_tmp_stream << "        border-bottom: none;\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    .option-item input {\n";
	data_tmp_stream << "        margin: 0;\n";
	data_tmp_stream << "        width: 16px;\n";
	data_tmp_stream << "        height: 16px;\n";
	data_tmp_stream << "        justify-self: center;\n";
	data_tmp_stream << "        /* Căn giữa trong grid cell */\n";
	data_tmp_stream << "    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "    /* Đảm bảo label chiếm toàn bộ chiều rộng còn lại */\n";
	data_tmp_stream << "    .option-item {\n";
	data_tmp_stream << "        width: 100%;\n";
	data_tmp_stream << "    }\n";
	data_tmp_stream << "</style>\n";
data_tmp_stream<<"\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "<script>\n";
	data_tmp_stream << "    document.addEventListener('DOMContentLoaded', function () {\n";
	data_tmp_stream << "        const sortSelect = document.getElementById('sort-display');\n";
	data_tmp_stream << "        const selectedItemsDiv = document.getElementById('selected-sort-items');\n";
	data_tmp_stream << "        const dropdownOptions = document.getElementById('sort-options');\n";
	data_tmp_stream << "        const table = document.getElementById('sensor-table');\n";
	data_tmp_stream << "        const checkboxes = dropdownOptions.querySelectorAll('input[type=\"checkbox\"]');\n";
	data_tmp_stream << "        const resetButton = document.getElementById('reset-button');\n";
	data_tmp_stream << "        const form = document.querySelector('form');\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "        // Toggle dropdown\n";
	data_tmp_stream << "        selectedItemsDiv.addEventListener('click', function () {\n";
	data_tmp_stream << "            dropdownOptions.classList.toggle('show');\n";
	data_tmp_stream << "        });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "        // Close dropdown when clicking outside\n";
	data_tmp_stream << "        document.addEventListener('click', function (e) {\n";
	data_tmp_stream << "            if (!e.target.closest('.custom-multiselect')) {\n";
	data_tmp_stream << "                dropdownOptions.classList.remove('show');\n";
	data_tmp_stream << "            }\n";
	data_tmp_stream << "        });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "        // Handle checkbox changes\n";
	data_tmp_stream << "        checkboxes.forEach(checkbox => {\n";
	data_tmp_stream << "            checkbox.addEventListener('change', function () {\n";
	data_tmp_stream << "                updateSelectedDisplay();\n";
	data_tmp_stream << "                updateHiddenSelect();\n";
	data_tmp_stream << "                sortTable();\n";
	data_tmp_stream << "            });\n";
	data_tmp_stream << "        });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "        // Reset button handler\n";
	data_tmp_stream << "        resetButton.addEventListener('click', function () {\n";
	data_tmp_stream << "            // Reset all form inputs\n";
	data_tmp_stream << "            form.reset();\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            // Uncheck all sort checkboxes\n";
	data_tmp_stream << "            checkboxes.forEach(checkbox => {\n";
	data_tmp_stream << "                checkbox.checked = false;\n";
	data_tmp_stream << "            });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            // Reset sort display\n";
	data_tmp_stream << "            selectedItemsDiv.textContent = 'Select sort options';\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            // Reset hidden select\n";
	data_tmp_stream << "            Array.from(sortSelect.options).forEach(option => {\n";
	data_tmp_stream << "                option.selected = false;\n";
	data_tmp_stream << "            });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            // Reset table to original order (reload or re-sort based on original data)\n";
	data_tmp_stream << "            resetTable();\n";
	data_tmp_stream << "        });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "        function updateSelectedDisplay() {\n";
	data_tmp_stream << "            const selected = Array.from(checkboxes)\n";
	data_tmp_stream << "                .filter(cb => cb.checked)\n";
	data_tmp_stream << "                .map(cb => cb.parentElement.textContent.trim());\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            if (selected.length === 0) {\n";
	data_tmp_stream << "                selectedItemsDiv.textContent = 'Select sort options';\n";
	data_tmp_stream << "            } else {\n";
	data_tmp_stream << "                selectedItemsDiv.textContent = selected.join(', ');\n";
	data_tmp_stream << "            }\n";
	data_tmp_stream << "        }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "        function updateHiddenSelect() {\n";
	data_tmp_stream << "            // Clear existing selections\n";
	data_tmp_stream << "            Array.from(sortSelect.options).forEach(option => {\n";
	data_tmp_stream << "                option.selected = false;\n";
	data_tmp_stream << "            });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            // Set new selections\n";
	data_tmp_stream << "            checkboxes.forEach(checkbox => {\n";
	data_tmp_stream << "                if (checkbox.checked) {\n";
	data_tmp_stream << "                    const option = Array.from(sortSelect.options).find(opt => opt.value === checkbox.value);\n";
	data_tmp_stream << "                    if (option) option.selected = true;\n";
	data_tmp_stream << "                }\n";
	data_tmp_stream << "            });\n";
	data_tmp_stream << "        }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "        function sortTable() {\n";
	data_tmp_stream << "            const selectedOptions = Array.from(checkboxes)\n";
	data_tmp_stream << "                .filter(cb => cb.checked)\n";
	data_tmp_stream << "                .map(cb => cb.value);\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            if (selectedOptions.length === 0) {\n";
	data_tmp_stream << "                resetTable();\n";
	data_tmp_stream << "                return;\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            const tbody = table.querySelector('tbody');\n";
	data_tmp_stream << "            const rows = Array.from(tbody.querySelectorAll('tr'));\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            rows.sort((a, b) => {\n";
	data_tmp_stream << "                const aCells = a.querySelectorAll('td');\n";
	data_tmp_stream << "                const bCells = b.querySelectorAll('td');\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                for (let sortBy of selectedOptions) {\n";
	data_tmp_stream << "                    let aValue, bValue;\n";
	data_tmp_stream << "                    let comparison = 0;\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    switch (sortBy) {\n";
	data_tmp_stream << "                        case 'date':\n";
	data_tmp_stream << "                            aValue = aCells[1].textContent;\n";
	data_tmp_stream << "                            bValue = bCells[1].textContent;\n";
	data_tmp_stream << "                            comparison = aValue.localeCompare(bValue);\n";
	data_tmp_stream << "                            break;\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        case 'time':\n";
	data_tmp_stream << "                            aValue = aCells[2].textContent;\n";
	data_tmp_stream << "                            bValue = bCells[2].textContent;\n";
	data_tmp_stream << "                            comparison = aValue.localeCompare(bValue);\n";
	data_tmp_stream << "                            break;\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                        case 'light':\n";
	data_tmp_stream << "                            aValue = parseFloat(aCells[3].textContent) || 0;\n";
	data_tmp_stream << "                            bValue = parseFloat(bCells[3].textContent) || 0;\n";
	data_tmp_stream << "                            comparison = aValue - bValue;\n";
	data_tmp_stream << "                            break;\n";
	data_tmp_stream << "                    }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                    if (comparison !== 0) {\n";
	data_tmp_stream << "                        return comparison;\n";
	data_tmp_stream << "                    }\n";
	data_tmp_stream << "                }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "                return 0;\n";
	data_tmp_stream << "            });\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            // Remove existing rows\n";
	data_tmp_stream << "            rows.forEach(row => tbody.removeChild(row));\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            // Add sorted rows\n";
	data_tmp_stream << "            rows.forEach(row => tbody.appendChild(row));\n";
	data_tmp_stream << "        }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "        function resetTable() {\n";
	data_tmp_stream << "            // Store original rows order on first load\n";
	data_tmp_stream << "            if (!window.originalTableRows) {\n";
	data_tmp_stream << "                const tbody = table.querySelector('tbody');\n";
	data_tmp_stream << "                window.originalTableRows = Array.from(tbody.querySelectorAll('tr'));\n";
	data_tmp_stream << "            }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            const tbody = table.querySelector('tbody');\n";
	data_tmp_stream << "            const currentRows = Array.from(tbody.querySelectorAll('tr'));\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            // Remove current rows\n";
	data_tmp_stream << "            currentRows.forEach(row => tbody.removeChild(row));\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "            // Add back original rows in original order\n";
	data_tmp_stream << "            window.originalTableRows.forEach(row => tbody.appendChild(row));\n";
	data_tmp_stream << "        }\n";
data_tmp_stream<<"\n";
	data_tmp_stream << "        // Initialize original table rows on first load\n";
	data_tmp_stream << "        const tbody = table.querySelector('tbody');\n";
	data_tmp_stream << "        window.originalTableRows = Array.from(tbody.querySelectorAll('tr'));\n";
	data_tmp_stream << "    });\n";
	data_tmp_stream << "</script>\n";
if(layoutName.empty())
{
std::string ret{std::move(data_tmp_stream.str())};
return ret;
}else
{
auto templ = DrTemplateBase::newTemplate(layoutName);
if(!templ) return "";
HttpViewData data = data_view_data;
auto str = std::move(data_tmp_stream.str());
if(!str.empty() && str[str.length()-1] == '\n') str.resize(str.length()-1);
data[""] = std::move(str);
return templ->genText(data);
}
}
